---
title: mybatis-的-@InsertProvider用法.md
top: false
cover: false
toc: true
mathjax: true
date: 2022-03-20 18:16:49
password:
summary:
tags: java持久化框架
categories: java持久化框架
---
---
title: mybatis-的-@InsertProvider用法.md
top: false
cover: false
toc: true
mathjax: true
date: 2022-03-20 18:16:49
password:
summary:
tags: java持久化框架
categories: java持久化框架
---
###实现动态sql的插入（按需插入）
注意需要使用@Param注解，不然在linux下会报空指针！

mapper
~~~

    /**
     * This method was generated by MyBatis Generator. This method corresponds to the database table
     * biz_coordination_sign
     *
     * @mbg.generated Mon Mar 22 10:38:04 CST 2021
     */
    @Options(useGeneratedKeys = true,keyProperty = "bizCoordinationSign.id")
    @InsertProvider(type = BizCoordinationSignSqlProvider.class, method = "insertSelective")
    int insertSelective(@Param("bizCoordinationSign") BizCoordinationSign record);

~~~

Provider
~~~
package org.szwj.ca.identityauthsrv.dao.coordination;

import java.util.Map;
import org.apache.ibatis.jdbc.SQL;
import org.szwj.ca.identityauthsrv.entity.coordination.BizCoordinationSign;

public class BizCoordinationSignSqlProvider {

    /**
     * This method was generated by MyBatis Generator. This method corresponds to the database table
     * biz_coordination_sign
     *
     * @mbg.generated Mon Mar 22 10:38:04 CST 2021
     */
    public String insertSelective(Map<String, Object> para) {
        BizCoordinationSign bizCoordinationSign = (BizCoordinationSign) para.get("bizCoordinationSign");

        SQL sql = new SQL();
        sql.INSERT_INTO("biz_coordination_sign");

        if (bizCoordinationSign.getId() != null) {
            sql.VALUES("`id`", "#{bizCoordinationSign.id,jdbcType=INTEGER}");
        }

        if (bizCoordinationSign.getAuthority() != null) {
            sql.VALUES("`authority`", "#{bizCoordinationSign.authority,jdbcType=CHAR}");
        }

        if (bizCoordinationSign.getSignedUuid() != null) {
            sql.VALUES("`signed_uuid`", "#{bizCoordinationSign.signedUuid,jdbcType=CHAR}");
        }

        if (bizCoordinationSign.getRelBizNo() != null) {
            sql.VALUES("`rel_biz_no`", "#{bizCoordinationSign.relBizNo,jdbcType=CHAR}");
        }

        if (bizCoordinationSign.getCode() != null) {
            sql.VALUES("`code`", "#{bizCoordinationSign.code,jdbcType=TINYINT}");
        }

        if (bizCoordinationSign.getTitle() != null) {
            sql.VALUES("`title`", "#{bizCoordinationSign.title,jdbcType=VARCHAR}");
        }

        if (bizCoordinationSign.getFileName() != null) {
            sql.VALUES("`file_name`", "#{bizCoordinationSign.fileName,jdbcType=VARCHAR}");
        }

        if (bizCoordinationSign.getCreateTime() != null) {
            sql.VALUES("`create_time`", "#{bizCoordinationSign.createTime,jdbcType=TIMESTAMP}");
        }

        if (bizCoordinationSign.getUpdateTime() != null) {
            sql.VALUES("`update_time`", "#{bizCoordinationSign.updateTime,jdbcType=TIMESTAMP}");
        }

        if (bizCoordinationSign.getCallbackNotifyUrl() != null) {
            sql.VALUES("`callback_notify_url`", "#{bizCoordinationSign.callbackNotifyUrl,jdbcType=LONGVARCHAR}");
        }

        if (bizCoordinationSign.getSignParticipant() != null) {
            sql.VALUES("`sign_participant`", "#{bizCoordinationSign.signParticipant,jdbcType=LONGVARCHAR}");
        }

        return sql.toString();
    }
}
~~~
