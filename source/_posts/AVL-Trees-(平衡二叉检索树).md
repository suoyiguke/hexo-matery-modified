---
title: AVL-Trees-(平衡二叉检索树).md
top: false
cover: false
toc: true
mathjax: true
date: 2022-03-20 18:16:49
password:
summary:
tags: 数据结构和算法
categories: 数据结构和算法
---
---
title: AVL-Trees-(平衡二叉检索树).md
top: false
cover: false
toc: true
mathjax: true
date: 2022-03-20 18:16:49
password:
summary:
tags: 数据结构和算法
categories: 数据结构和算法
---
https://www.jianshu.com/p/4f5eca987990
###平衡二叉树是什么?
（AVL—— 发明者为Adel’son-Vel’skii 和 Landis）

平衡二叉查找树，又称 AVL树。 它除了具备二叉查找树的基本特征之外，还具有一个非常重要的特点：它 的左子树和右子树都是平衡二叉树，且左子树和右子树的深度之差的绝对值（平衡因子 ） 不超过1。 也就是说AVL树每个节点的平衡因子只可能是-1、0和1（左子树高度减去右子树高度）。

###平衡二叉树是什么? 为什么要维持平衡？位维持平衡有什么好处？

普通的二叉查找树不会维持平衡。下面是一个示例
![image.png](https://upload-images.jianshu.io/upload_images/13965490-5e39b105b21ef053.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
在二叉查找树中, 左子树的键值总是小于根的键值,右子树的键值总是大于根的2 键值。因此可以通过中序遍历得到键值的排序输出,图5-2的 图5-2二叉查找树 二叉查找树经过中序遍历后输出:2、3、5、6、7、8 
对图5-2的这棵二叉树进行查找,如查键值为5的记录,先找到根,其键值是 6,6大于5,因此查找6的左子树,找到3;而5大于3,再找其右子树;一共找了 3次。如果按2、3、5、6、7、8的顺序来找同样需要3次。用同样的方法再查找键 值为8的这个记录,这次用了3次查找,而顺序查找需要6次。计算平均查找次数 可得:顺序查找的平均查找次数为(1+2+3+4+5+6)/6=3.3次,二叉查找树的平均 查找次数为(3+3+3+2+2+1)/6=2.3次。二叉查找树的平均查找速度比顺序查找来 得更快。

![image.png](https://upload-images.jianshu.io/upload_images/13965490-9144628e2af9387e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

 二叉查找树可以任意地构造,同样是2、3、5、6、7、8这五个数字,也可以按照图5-3 的方式建立二叉查找 。图5-3的平均查找次数为(1+2+3+4+5+5)/6=3.16次,和顺序查找差不多，显然这棵二叉查找树的查询效率就低了。因此若想最大性能地构造 一棵二叉查找树,需要这棵二叉查找树是平衡的,从而引出 了新的定义平衡二叉树,或称为AVL树。 

平衡二叉树的定义如下:首先符合二叉查找树的定义, 其次必须满足任何节点的两个子树的高度最大差为1.显然, 图5-3不满足平衡二叉树的定义,而图5-2是一棵平衡二叉 树。平衡二叉树的查找性能是比较高的,但不是最高的,只 6 8 是接近最高性能。最好的性能需要建立一棵最优二叉树,但图5-3效率较低的一棵。

但是最优二叉树的建立和维护需要大量的操作,因此用户一 般只需建立一棵平衡二叉树即可。 平衡二叉树的查询速度的确很快,但是维护一棵平衡二叉树的代价是非常大的。通 常来说,需要1次或多次左旋和右旋来得到插入或更新后树的平衡性。

###什么是平衡的，怎么判定是否平衡 ？
平衡因子，即 某节点的左右孩子节点树高度之差。
若一棵树内有存在一个节点的平衡因子绝对值大于1，那么该树就是不平衡的。

那么下面这棵树平衡因子绝对值均小于等于1，就是平衡的了。
![image.png](https://upload-images.jianshu.io/upload_images/13965490-e6d2158b902de68c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

这棵树值为7的节点平衡因子绝对值为2，是不平衡的！
![image.png](https://upload-images.jianshu.io/upload_images/13965490-03316976099be817.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)




###怎么保持平衡的
那么如何是二叉查找树在添加数据的同时保持平衡呢？基本思想就是：当在二叉排序树中插入一个节点时，首先检查是否因插入而破坏了平衡，若 破坏，则找出其中的`最小不平衡二叉树`。
所谓最小不平衡子树指：离插入节点最近且以平衡因子的绝对值大于1 的结点为根的子树。那么，以下不平衡树的最小不平衡二叉树是：7-8-9
![image.png](https://upload-images.jianshu.io/upload_images/13965490-17cbb0083c7d33a8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

在保持二叉排序树特性的情况下，调整最小不平衡子树中节点之间的关系，以达 到新的平衡。



###维持平衡的操作
######左旋
![image.png](https://upload-images.jianshu.io/upload_images/13965490-7b7a7991cf802d8e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

######右旋


###平衡二叉树性能如何？

性能分析：avl_tree 不会出现O(n)情况，查找复杂度为O(logN),但是由于高度的平衡，插入和删除的代价加大，所以该类型适合在多查找，少变动的场景。
