---
title: mysql-使用规范.md
top: false
cover: false
toc: true
mathjax: true
date: 2022-03-20 18:16:49
password:
summary:
tags: mysql基本
categories: mysql基本
---
---
title: mysql-使用规范.md
top: false
cover: false
toc: true
mathjax: true
date: 2022-03-20 18:16:49
password:
summary:
tags: mysql基本
categories: mysql基本
---
###命名方面

 命名约定 对于命名，并没有很严苛的规定，但在同一个应用中，建议风格统一。 以下是一些通用的法则，可能有互相冲突的地方，请读者自行衡量取舍。

1、命名应有意义，以使用方便记忆、描述性强的可读性名称为第一准则，应尽量避免使用缩写或代码来命名。传统的使用缩写或代码的方法是出于一些历史原因，比如希望节省空间、尽快加载数据等，但随着硬件的快速发展，目前来说这么做的意义不大。
2、数据库、表都用小写（尽量不要使用除下划线、小写英文字母之外的其他字符，如果要用下划线，应该尽量保持一致的 风格）。
3、索引的命名以idx_为前缀。
4、命名不要过长（应尽量少于25个字符）。 
5、不要使用保留字。 
6、注意字段类型的一致性。
7、命名的一致性，同一个字段在不同的表中也应是相同的类型或长度。 
8、如果同一个数据库下有不同的应用模块，则可以考虑对表名用不同的前缀标识。 
9、备份表时加上时间标识。 
10、新建库必须提供库名，库的命名规则必须契合所属业务的特点，新建库必须说明需要授权的用户，若要新建用户，则必须提供用户名，用户命名规则要契合业务。

###索引方面
1、建议索引中的字段数量不要超过5个。
2、 单张表的索引数量建议控制在5个以内。
3、唯一键和主键不要重复。
4、索引字段的顺序需要考虑字段唯一值的个数，选择性高的字段（频繁使用的，作为查询条件的）一般放在前面。
5、ORDERBY、GROUP BY、DISTINCT的字段需要放在复合索引的后面，也就是说，复合索引的前面部分用于等值查询， 后面的部分用于排序。
6、使用EXPLAIN判断SQL语句是否合理使用了索引，尽量避免Extra列出现Using File Sort，UsingTemporary。 
7、UPDATE、DELETE语句需要根据WHERE条件添加索引。
8、建议不要使用“like%value”的形式，因为MySQL仅支持最左前缀索引。 
9、对长度过长的VARCHAR字段（比如网页地址）建立索引时，需要增加散列字段，对VARCHAR使用散列算法时，散列后 的字段最好是整型，然后对该字段建立索引。
10、存储域名地址时，可以考虑采用反向存储的方法，比如把news.sohu.com存储为com.sohu.news，方便在其上构建索引和进行 统计。
11、合理地创建复合索引，复合索引(a,b,c)可以用于“wherea=?”、“wherea=?and b=?”
12、“wherea=?and b=?and c=?”等形式，但对 于“wherea=?”的查询，可能会比仅仅在a列上创建单列索引查询要慢，因此需要在空间和效率上达成平衡。
13、合理地利用覆盖索引。由于覆盖索引一般常驻于内存中，因此可以大大提高查询速度。 ·把范围条件放到复合索引的最后，WHERE条件中的范围条件（BETWEEN、<、<=、>、>=）会导致后面的条件使用不了 索引。

###表设计方面
1、如果没有特殊的情况，建议选择InnoDB引擎。
2、每个表都应该有主键，可选择自增字段，或者整型字段。使用UNSIGNED整型可以增加取值的范围。例外的情况是，一 些应用会频繁地基于某些字段进行检索，设计人员可能会认为这些字段/字段组合更适合做主键，因为它们更自然、更高效。

3、尽量将字段设置成NOTNULL。如果没有特殊的理由，建议将字段定义为NOTNULL。如果将字段设置成一个空字符串或 设置成0值并没有什么不同，都不会影响到应用逻辑，那么就可以将这个字段设置为NOTNULL。NULL值的存储需要额外的空 间，且会导致比较运算更为复杂，这会使优化器更难以优化SQL。当然，是否设置为NULL更应取决于你的业务逻辑，如果你 确实需要，那么就设置它允许NULL值，NULL值虽然会导致比较运算更加复杂，但这比因为定义了NOTNULL默认值而导致应用逻辑出现异常要好。

4、使用更短小的列，比如短整型。整型列的执行速度往往更快。

5、考虑使用垂直分区。比如，我们可以把大字段或使用不频繁的字段分离到另外的表中，这样做可以减少表的大小，让表 执行得更快。我们还可以把一个频繁更新的字段放到另外的表中，因为频繁更新的字段会导致MySQLQueryCache里相关的结 果集频繁失效，可能会影响性能。需要留意的一点是，垂直分区的目的是为了优化性能，但如果将字段分离了到分离表后，又 经常需要建立连接，那可能就会得不偿失了，所以，我们要确保分离的表不会经常进行连接，这时，用程序进行连接是一个可 以考虑的办法。

6、存储精确浮点数时必须使用DECIMAL替代FLOAT和DOUBLE。` 更提倡用Long实现！`

7、建议使用UNSIGNED类型存储非负值。 

8、建议使用INTUNSIGNED存储IPV4。可以使用INET_ATON()、INET_NTOA()函数进行转换，PHP里也有类似的函数如 ip2long()、long2ip()。

9、建议不要使用ENUM类型。 

10、尽可能不要使用TEXT、BLOB类型。

11、在VARCHAR(N)中，N表示的是字符数而不是字节数，比如VARCHAR(255)，最大可存储255个汉字。需要根据实际的宽 度来选择N。此外，N应尽可能地小，因为在MySQL的一个表中，所有的VARCHAR字段的最大长度是65535个字节，进行排序 和创建临时表一类的内存操作时，会使用N的长度申请内存（对于这一点，MySQL 5.7后有了改进）。 

12、字符集建议选择UTF-8。 

13、存储年时使用YEAR类型。 
14、存储日期时使用DATE类型。 
15、存储时间时（精确到秒）建议使用TIMESTAMP类型，因为TIMESTAMP使用的是4字节，DATETIME使用的是8个字节。
16、不要在数据库中使用VARBINARY或BLOB存储图片及文件等。MySQL并不适合大量存储这种类型的文件。 

17、JOIN（连接）字段在不同表中的类型和命名要一致。

18、如果变更表结构可能会影响性能，则需要通知DBA审核
